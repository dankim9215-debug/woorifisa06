<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI í•™ìŠµ ë¦¬ë§ˆì¸ë“œ í€´ì¦ˆ</title>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <style>
        :root { --primary: #3498db; --success: #2ecc71; --dark: #2c3e50; --bg: #f8f9fa; }
        body { font-family: 'Pretendard', -apple-system, sans-serif; background: var(--bg); color: var(--dark); line-height: 1.6; margin: 0; padding: 20px; }
        .container { max-width: 850px; margin: 0 auto; background: white; padding: 40px; border-radius: 15px; box-shadow: 0 10px 30px rgba(0,0,0,0.08); }
        h1 { text-align: center; color: var(--dark); margin-bottom: 30px; font-weight: 800; }
        
        .setup-box { background: #ffffff; padding: 25px; border-radius: 12px; margin-bottom: 30px; border: 2px solid #edf2f7; }
        .input-group { display: flex; flex-direction: column; gap: 12px; }
        label { font-weight: 600; font-size: 14px; color: #4a5568; }
        input { padding: 14px; border: 1px solid #e2e8f0; border-radius: 8px; font-size: 16px; transition: border 0.2s; }
        input:focus { border-color: var(--primary); outline: none; }
        
        button { padding: 16px; background: var(--dark); color: white; border: none; border-radius: 8px; font-size: 16px; font-weight: bold; cursor: pointer; transition: 0.3s; margin-top: 10px; }
        button:hover { background: #1a252f; transform: translateY(-1px); }
        button:disabled { background: #cbd5e0; cursor: not-allowed; }

        #quiz-display { margin-top: 40px; border-top: 2px solid #f1f5f9; padding-top: 20px; }
        
        /* í€´ì¦ˆ ê²°ê³¼ ìŠ¤íƒ€ì¼ */
        details { background: #f8fafc; padding: 20px; border-radius: 10px; margin: 15px 0; border: 1px solid #e2e8f0; }
        summary { font-weight: 700; color: var(--primary); cursor: pointer; outline: none; }
        pre { background: #1e1e1e !important; padding: 15px; border-radius: 8px; overflow-x: auto; margin: 15px 0; }
        code { font-family: 'Fira Code', 'Courier New', monospace; font-size: 14px; }
        blockquote { border-left: 4px solid var(--success); margin: 0; padding-left: 15px; color: #4a5568; }
        
        .loading { text-align: center; display: none; padding: 40px 0; }
        .spinner { border: 4px solid rgba(0,0,0,0.05); width: 40px; height: 40px; border-radius: 50%; border-left-color: var(--primary); animation: spin 1s linear infinite; margin: 0 auto 20px; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    </style>
</head>
<body>

<div class="container">
    <h1>ğŸš€ ë³µìŠµ ì±Œë¦°ì§€</h1>
    
    <div class="setup-box">
        <div class="input-group">
            <label for="apiKey">Gemini API Key</label>
            <input type="password" id="apiKey" placeholder="AI Studio í‚¤ë¥¼ ì…ë ¥í•˜ì„¸ìš”">
            
            <label for="dateInput">í•™ìŠµì¼ì§€ ë‚ ì§œ (íŒŒì¼ëª…)</label>
            <input type="text" id="dateInput" placeholder="ì˜ˆ: 2026.01.08">
            
            <button id="genBtn" onclick="generateQuiz()">ìƒˆë¡œìš´ ë¬¸ì œ ìƒì„±</button>
        </div>
    </div>

    <div id="loading" class="loading">
        <div class="spinner"></div>
        <p><strong>ì¼ì§€ë¥¼ ë¶„ì„í•˜ì—¬ ë¬¸ì œë¥¼ ì„¤ê³„í•˜ê³  ìˆìŠµë‹ˆë‹¤...</strong><br>ì ì‹œë§Œ ê¸°ë‹¤ë ¤ ì£¼ì„¸ìš”.</p>
    </div>

    <div id="quiz-display">
        </div>
</div>

<script>
    // ë§ˆí¬ë‹¤ìš´ ì„¤ì • ë° í•˜ì´ë¼ì´íŒ… ì—°ë™
    marked.setOptions({
        highlight: function(code, lang) {
            const language = hljs.getLanguage(lang) ? lang : 'python';
            return hljs.highlight(code, { language }).value;
        },
        langPrefix: 'hljs language-'
    });

    async function generateQuiz() {
        const apiKey = document.getElementById('apiKey').value;
        const date = document.getElementById('dateInput').value;
        const display = document.getElementById('quiz-display');
        const loading = document.getElementById('loading');
        const btn = document.getElementById('genBtn');

        if (!apiKey || !date) {
            alert("API í‚¤ì™€ ë‚ ì§œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.");
            return;
        }

        display.innerHTML = '';
        loading.style.display = 'block';
        btn.disabled = true;

        try {
            const githubUser = "dankim915-debug"; 
            const repoName = "dankim9215-debug/woorifisa06";
            const fileUrl = `https://raw.githubusercontent.com/${githubUser}/${repoName}/main/${date}.md`;
            
            const fileRes = await fetch(fileUrl);
            if (!fileRes.ok) throw new Error("í•´ë‹¹ ë‚ ì§œì˜ í•™ìŠµì¼ì§€ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
            const logContent = await fileRes.text();

            const prompt = `ë‹¹ì‹ ì€ ì‹¤ë¬´ ì¤‘ì‹¬ì˜ ì»´í“¨í„° êµìœ¡ ì „ë¬¸ê°€ì…ë‹ˆë‹¤. 
            ì œê³µëœ í•™ìŠµ ë‚´ìš©ì„ ë°”íƒ•ìœ¼ë¡œ ì´ 10ê°œì˜ ë¬¸ì œë¥¼ ìƒì„±í•˜ì„¸ìš”.
            
            [ë¬¸ì œ êµ¬ì„± ë°©ì‹]
            1. ê°ê´€ì‹ (5ë¬¸ì œ): ê°œë…ì˜ ì •í™•í•œ ì´í•´ í™•ì¸
            2. ë‹¨ë‹µí˜• (2ë¬¸ì œ): ì£¼ìš” ìš©ì–´ ë° ë¬¸ë²• í™•ì¸
            3. **ì½”ë”© ì£¼ê´€ì‹ (3ë¬¸ì œ)**: í•™ìŠµí•œ ë¡œì§ì´ë‚˜ ë¬¸ë²•ì„ ì‚¬ìš©í•˜ì—¬ ì§ì ‘ ì½”ë“œë¥¼ ì‘ì„±í•˜ëŠ” ë¬¸ì œ. 
               - ì˜ˆ: "OO í´ë˜ìŠ¤ë¥¼ ìƒì†ë°›ì•„ XX ê¸°ëŠ¥ì„ ìˆ˜í–‰í•˜ëŠ” ë©”ì„œë“œë¥¼ ì‘ì„±í•˜ì‹œì˜¤."
               - ì˜ˆ: "ì œì‹œëœ ë¦¬ìŠ¤íŠ¸ë¥¼ ì»´í”„ë¦¬í—¨ì…˜ì„ ì‚¬ìš©í•˜ì—¬ í•œ ì¤„ë¡œ ë³€í™˜í•˜ì‹œì˜¤."
            
            [ì¶œë ¥ ê°€ì´ë“œë¼ì¸]
            - ëª¨ë“  ë¬¸ì œëŠ” ë§ˆí¬ë‹¤ìš´ í˜•ì‹ì„ ì¤€ìˆ˜í•  ê²ƒ.
            - ì •ë‹µê³¼ í•´ì„¤(ëª¨ë²” ë‹µì•ˆ ì½”ë“œ í¬í•¨)ì€ ë°˜ë“œì‹œ <details><summary>ì •ë‹µ ë° í•´ì„¤ í™•ì¸í•˜ê¸°</summary> íƒœê·¸ë¡œ ê°ì‹¸ì„œ ìˆ¨ê¸¸ ê²ƒ.
            - ì½”ë”© ë¬¸ì œì˜ ëª¨ë²” ë‹µì•ˆì€ ë°˜ë“œì‹œ \`\`\`python ì½”ë“œ ë¸”ë¡ì„ ì‚¬ìš©í•  ê²ƒ.
            
            í•™ìŠµ ë‚´ìš©:
            ${logContent}`;

            const aiRes = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-pro:generateContent?key=${apiKey}`, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ contents: [{ parts: [{ text: prompt }] }] })
            });

            const aiData = await aiRes.json();
            if (aiData.error) throw new Error(aiData.error.message);
            
            const quizMarkdown = aiData.candidates[0].content.parts[0].text;
            display.innerHTML = marked.parse(quizMarkdown);

            document.querySelectorAll('pre code').forEach((el) => {
                hljs.highlightElement(el);
            });

        } catch (error) {
            display.innerHTML = `<p style="color:#e53e3e; text-align:center;"><strong>ì˜¤ë¥˜:</strong> ${error.message}</p>`;
        } finally {
            loading.style.display = 'none';
            btn.disabled = false;
        }
    }
</script>

</body>
</html>
